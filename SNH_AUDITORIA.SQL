CREATE TABLE HOSPITALARIO.SNH_AUDITORIA
(
  AUDITORIA_ID          NUMBER(10)              DEFAULT HOSPITALARIO.SNH_S_MST_AUDITORIA.NEXTVAL NOT NULL,
  ID_PRINCIPAL          NUMBER(10),
  VALOR_ANTERIOR        VARCHAR2(1000 BYTE),
  VALOR_ACTUAL          VARCHAR2(1000 BYTE),
  NOMBRE_CAMPO          VARCHAR2(1000 BYTE),
  NOMBRE_TABLA          VARCHAR2(1000 BYTE),
  ACCION                VARCHAR2(1000 BYTE),
  USUARIO_REGISTRO      VARCHAR2(50 BYTE),
  FECHA_REGISTRO        TIMESTAMP(0)            DEFAULT SYSTIMESTAMP,
  USUARIO_MODIFICACION  VARCHAR2(50 BYTE),
  FECHA_MODIFICACION    TIMESTAMP(0),
  VALOR_FECHA_ANTERIOR  TIMESTAMP(0),
  VALOR_FECHA_ACTUAL    TIMESTAMP(0)
);

COMMENT ON TABLE HOSPITALARIO.SNH_AUDITORIA IS 'Tabla en donde se guarda la auditoria de los registros de cada tabla del modulo de quirofano';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.AUDITORIA_ID IS 'Llave primaria';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.ID_PRINCIPAL IS 'llave primaria del registro que se esta afectando';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.VALOR_ANTERIOR IS 'valor anterior a la modificiacion del registro';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.VALOR_ACTUAL IS 'valor actual luego de realizar modificacion';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.NOMBRE_CAMPO IS 'nombre de la columna afectada';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.NOMBRE_TABLA IS 'nombre de la tabla afectada';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.ACCION IS 'accion DML realizada. I - Insert. U - Update. D - Delete';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.USUARIO_REGISTRO IS 'Usuario registra [SCS_MST_USUARIOS]';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.FECHA_REGISTRO IS 'FECHA_REGISTRO';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.USUARIO_MODIFICACION IS 'USUARIO_MODIFICACION [SCS_MST_USUARIOS]';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.FECHA_MODIFICACION IS 'FECHA_MODIFICACION';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.VALOR_FECHA_ANTERIOR IS 'valor anterior para campos fechas luego de realizar modificacion';

COMMENT ON COLUMN HOSPITALARIO.SNH_AUDITORIA.VALOR_FECHA_ACTUAL IS 'valor actual para campos fechas luego de realizar modificacion';


ALTER TABLE HOSPITALARIO.SNH_AUDITORIA ADD (
  CONSTRAINT NNC_SNH_AUD_FEC_REGISTRO
  CHECK ("FECHA_REGISTRO" IS NOT NULL)
  ENABLE VALIDATE
,  CONSTRAINT NNC_SNH_AUD_ID
  CHECK ("ID_PRINCIPAL" IS NOT NULL)
  ENABLE VALIDATE
,  CONSTRAINT NNC_SNH_AUD_USERNAME_REG
  CHECK ("USUARIO_REGISTRO" IS NOT NULL)
  ENABLE VALIDATE
,  PRIMARY KEY
  (AUDITORIA_ID)
  USING INDEX
  ENABLE VALIDATE);